import { Component, OnInit } from '@angular/core';
import { MatDialog } from '@angular/material/dialog';
import { DomSanitizer } from '@angular/platform-browser';
import { ActivatedRoute } from '@angular/router';
import { ChoclatePrice } from 'src/app/models/choclate/choclate.model';
import { ChoclateService } from 'src/app/services/choclate.service';
import { EditChoclateDetailsComponent } from '../edit-choclate-details/edit-choclate-details.component';

export interface CheapestOffer extends ChoclatePrice {
  isCheapest: boolean;
}
@Component({
  selector: 'app-choclate-detail',
  templateUrl: './choclate-detail.component.html',
  styleUrls: ['./choclate-detail.component.scss'],
})
export class ChoclateDetailComponent implements OnInit {
  currentChoclate: any = {};
  cheapestOfferImg =
    'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxITEBUTEhMWFhUXFx0YGBgYGBcgGhseGx8YIBcZGR4YHiggGholHxgXITEiJSkrLi4uGR8zODMtNygtLisBCgoKDg0OGxAQGy0lICYtLy01NS0tLS0vLS8tLS0tMC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLf/AABEIAOEA4QMBIgACEQEDEQH/xAAcAAACAwEBAQEAAAAAAAAAAAAABwUGCAQBAwL/xABBEAACAQIEAQsBBgUEAAYDAAABAgMAEQQFEiExBgcTIkFRYXGBkaEyQmKCkqKxFCNScsEzwtHwFSRDc7LxFjRT/8QAGgEAAgMBAQAAAAAAAAAAAAAAAAQCAwUGAf/EADIRAAEDAQUFCAIDAQEBAAAAAAEAAgMRBAUhMUESUWGRoRNxgbHB0eHwIjIzQvEUkhX/2gAMAwEAAhEDEQA/AHjRRRQhFFFFCEUUUUIRRRRQhFFFFCEUUUUIRRRRQhFFFcuMxkcS6pJERRxLsFHuTahC6qKqOYc4eXxX/nCQ8LR2PySBb1qv5jzlkxM+HWJQNh0jqzsdidKI3AXHE73qBlaNUyyxzux2T44eaZt6+UuJRfqdV8yB+9Z4zTlxj57hsQ4B+ylkHl1LE+pNV53Ym5LE953PzVJtI0C0mXK4/u8DuFfOi1TDOrfSwbyIP7V9L1lOCZ0OpGYEcCpIPuKufJznJxkBAlfp4uBVyNQ8Q9r/AJr+lettAOYUJbmkaKscD09x1T6oqG5O8oIMZF0kLXt9SnZkPcw7PPgamaYqDkshzS07LhQhFFFFC8RRRRQhFFFFCEUUUUIRRRRQhFFFFCEUUV5ehC9oqHzTlLhMNfpsRGhH2b3b8q3b4qo5nztYVLiGN5SO09RT73b4qBkaMyr4rNNLixpI6c8kxq/DuALkgAdppG5pzq46S4iCQj7q6m932+KqWY5ziZzead38HZiPQXsPQVUbQ0ZBaEVzyu/cgdfYdU/cz5b4CC4bEoxH2Y+uf0Xt61Uc054IxtBh2b7zmw/KtyfcUobUCqnTvKfjuiBv7Vd0HTHqrjm3OPmEuwmWNT2RLb9TXa/rVVxWLlkOqR5GPezEn3Y18DUzgOTWKnCmCFnvf6VYAWNusXAXfjsx9KqJLuKebHFAKgBvHAdVw4DAPKSEtcC9ri57gBxYk2FhfjX3OAMc3RSEXBKkgggGx0kFGJPEbdnjVyyjmpxrWaWRIfAMWcfkOn9VW3LOanBR2aVpJj3E6V9ksfmrGwvOiUlvKBhI269wr1ySoxYVWEZQswUArupv9LD7wGm4sO08a78s5LYySMhcE7KSCHI0MNhfSWNmXjtYinxg8mw8VzFBEhPEqignzIFzUhVos+8rOfexpRjeZOfgR5rMmacmsZhhefDuq/1Wuvqy3A9aia1ZIgYEEAg7EEbHwN6SnOlyOXCsMRh1tC7aWQcEa2wX7rWO3YR4ioSQ7IqE7YrzE7+zeKE5UyPBVnk7yhlwmISWEWsAGW+zjtB7r/B38K0PlOYJiII5ozdZFDDv8QfEHY+VZfjUk7W4E727Nzx/am7zJZsWjmwzH6CHTyOzW8LgH8VFnfQ7KrvazNdH2ozGfcfY0omlRRRTi55FFFFCEUUUUIRRRX5LW40IX6oqr8oeVcMCDRJC7ngGkNrb9qK3Ei2/bSyz3lfjZob9K0dpZFbozZSBp0AEWJsdW997jaq3StanILDJNwHH2zTozDMoIRqmlSMd7sB+5qpZnzo4CPaNnmP3FsPzPbbyvSQxxJkYk7kk8ST7tv71zmqDaHaLWiueICr3E9PfzTJzXncxDG2HhSMd73dv8Aexqp5lyrxk6npcTITf6Q1kIPgthtbt438Kgq+kETuwVFJY8AoJPsKpdI45laEdjgjxYwfeJ91+D510HR0YPBhs37qR3XG1/CrFlnN7mE1j0JjHfKdPwbt8Vbcp5nuBxOI81iX/AHON/wAtetjccgoS2+zs/Z/LFLPHYB4rBwFa19JIuAbW1D7NwQRfe1q9yvLZJ3CxJIx7dKsbflBp95fyDwER1dD0rE3LzEuSe832v6VPPJFCnWKRoO8qqj9hVws51Kzn3yAKMbU8cOQFT1SQy3mvx8v1KkK34uw1W/tXVbyvVvyzmmhAX+InkktvpSyrvx43PyKuP/5VgL2/jMPf/wB1P+ak8PiEddSMrqeBUgj3FTbDH3pKa8bU7M7I4CnXPqojK+SOCgsYsNGGH2mGpvzNc1OWAr8yC4Njbbj3eNZrz/OMbJI8eJndijFWUsdN1JB6osLXHdUnvEYwCjZbK+2ONX5b6k47v9CfuN5T4SIlWmVmAuUju7279MYJA8TVTzbnXgj/ANOCVr30l7IDbtHE237QKS6ox2AJ8AP+K8CHsHsP+KodO7TBa0VzwtxcS7p5Y9U1p+deVUSQYeMq4PV1PcaTaxNrXPGrVyP5dQY4mMKY5QL6GN9QHEoe23dsaQCNY3FdWV498POk0f1I+oeNuIPgRceteNncDUqUt1QuYWsFHaZ8jWvctS1X+W2XdPl+IjAu3RllH3k6ygeNxb1qWwWKWWNJEN1dQynwYAj966bU4RUUXNMcWODhmD5LJ96tvNdmPQ5nDvZZNUbfiBK/qC/NQ3KbL/4fGTw/0yMB/aTdP0kVzRM0MqOrAspR10m+/VIF+wjYEdhBHZWcDsmu5dnK0TRFo/sMPHLzC1KK9rly/FrLEkq/S6K48mAI/euqtJcUiiiihCKKKKELw0o+cjllK8rYTCXKrcSMqhtR+0tiCNAsQe8g929+5a5v/C4GaZfrA0p/c2wPpe/pSFwObPFPE1yNDqxub34Br7cCo4G/ae2l530/Fa12WbbrKRWmQO+lfgd9dF9Ic1JtFJh0a22kExnxGxCgmw7BuK+EZYwSqF+iQNYkXXVtpHAkkgA2HYOFdGV5JNjsaYUI1FmLvxVVudT7cRvtvvcC9PTk5yVw2DjCxRgtYapGALsR2k9g8BtVLI3PWjarXFZqACpNDQV98K8Akbl/JDHznqYeQg/acFV92tf0vVuy3minbeedE7woLn3OkfvTfklCi7EADtJsPmq5mfLvL4PqxCuf6Y+uf03A9TV3Ysbi4+izjedqlNIhyFT6+Sj8s5scvisWR5iO2Rjb8qWB8jerZgcvhhXTDGkY7kUD9qWma88CbjD4cn70rWH5VBv7iqlmnOLmE1x03RKeyNQv6t2+aO1jb+oR/wANsn/kPM+mK0AZFuASLngL71+71nfkfmU0ePw2IlZmQylC7sTfUNLi7Hs6RT7U1edTN2w+XsENnmYRAjiAblyPwqR61NsoLS6mSomsDo5mRA12venRVjlrznMGaHAkCxsZrA37+jG4t94+nYaWONxkkzl5ZGdj2sxJ9L8K/JVdAOo6rkFdOwXsN77m9xa3rU5yAy6OfMIopfoJLW7yoJA9wPalC5zziugiiissZLBkMTqcPuWCr7Ag2OxGxB7P+K7smzmfCyCSCRla+4H0t4MvAjzqd5x+TK4LFAR6jFIutdRuQRs4J7d7H8VVRge2okFpV7JGzRh2YI1WjORfKVMfh+kA0up0yJ3NbiO9TxB/4pQc6uXdDmcrAdWULIPUWb9Sk+td3M/mxix3Qk9WZStvFd1PsGHrVg578tvHBiB9ljGfJhqW/qp96YcduKuoWNDGLLbtgfq4YeOXIhKaCUqwKmxBB4kftTG5n83b+NeKS38yM6dgN0JNhYb7M/saXuFwsjhtCM2kXYhSQoF9yewcaueSYE4fERYrXGghKFkIKuyk6GItdTcFje54rfc1TGSHVWhbQx0bmOpUjxrhTmafQvvzrcntONMsSqFkj6RusqjUDZj1iON1O3eTVWXIDdekmhQG121XsCL3OgEHYbAG5pk89cyfw8ID/wAzWbKDuUKnUSB9m4SlHJinZQpdio4KSdI8hwvUpQA8qu73ySWZhrTTLdqP8T55rcwWXL1UMW6F2iuRYkA3Q27Oqw9quVKPmMxJviYuyyN69YH/ABTcpqI1YFhW+Ps7Q8ePMV9UkOenL+jxqTDhMm/9y7H9JSl7Tw55su6TALKBvDIDf7r7N86T6Uj6VmFHlb92Sbdmbww5ZdCE/uanM+my1F7YmMR9LFf0svtVzpPcyGZWlmgJ2ZRIvmp0t8MvtThpqI1YFz9vi7O0PbxrzxRRRRViURRRRQhL/neBbCwR6rasQCb/AHUfbfY8b2PG1JGZhqJHC5tfuvtTz53YL4ASC945Abi+2pWS+xHaw/4pEmkp/wB1090fweJ+8qJ080OBQDFzAG7S6BcC4Ub2279Qv5CmJItwRe1xxHZSq5kc0JOIgY3O0i347dVvjo6bBpmE/gFiXg1wtDg7h5BZkz7F4pppI55pJGRmQ6mYi6kjYEkAeVcUmFIC2KtddRCm9h42Fge8dnbamdyr5B4ibMZpIYkMcihtTsAoYizWt1tVxfgRuaieUHNzLhMHJiDPqI06lVSBpJAYkk72Njw7KUdE7HBdBFboSGNDgCaYDee7LH5VAtX0gwzu6ogLOxsqgbkngAK8EhAsCbdwJ7rft8V05XPIs8ci3LRurjtPVIb0qtOuJph9+Fa8q5s8wltrCQqNxqYX8wFvY7DjarhzwYRzlsTMbtHIocjgdSspP5re9MHB4hZI0kU3V1DA+DAEfBqH5cZf0+XYiMC56MsvmnWHytO9k0NNNVzH/fJJPG6SgAOQ40rx0WbqmeSeNEGMhlY2CMrHyuAw4HaxNQxr9xyFTdSQe8cR5UlXVdO9m00tOuCeHOvlnS4RJRIqdEx1MxaxRxuvVBJuyxi1qUc0UJF2xIJtewVzY3BIuRt278ePfTmy7/z+RBTuz4cp+NLgHf7yA0g7b1fNmHb1k3WDsOjJoWupp86gqUwuPSCSGWAuXRlZr2AOk3IFt7Hx/wDp68usEMVlkwXf+X0qeOmzC3mLj1rOtaF5ucwGIyyHVuUXom/BsL+a6feiDGrd6jerSwRzNzB+RyoUiMuzDot9CsDtpa+k+emxO9jx7K+uYZrJiNnN7bIoLaVHcAxICi3f218s8wJw+JmhP2HZfQHqn2tX6ydmSVJAFABazOOrsOtcfaADAkC538RVNTktQhv8jc8xyquOVmYksSx7STc+9EcDMQqqzE8AAST5AcaY3IHKY8waczyvdWVisWmNGDbhjpW9wy+BG1NTLMjw+HAEUYFhYEks1u7U1zbw4VayEuFUhaL0bC4sLauHGg++CrHNfyUbBwtJMLSzWuv9Ci+kH7xuSfQdlXqvLV7TbWhooFzs0rpXl7syozlDgBiMLNCftxso87dU+9qzG6kEg7Ht8+2tX1m/l9l38PmOITsLF18n6wHpe3pS9pGRWxcsmL49+Pp7L9cgcf0GYwMTZS2ht+yTq728SDv3Vo6soovA3tb38D79tacyDHjEYWGb/wDpGrHzI3HvevbOcwvL5jo5r/Dlj6nkpKiiimViIooooQonlRgOnwc8Pa8bBf7rXX5ArNLYdgRcWvw8ffzFarNZx5cYMwY6eK+2skC97K2kqLdnV0j8NLWluRW5c0hq6Px9D6cl2832IfCZrEJAV1kxMD98dXfgRq0m42rQVZUixDqykMeq2pd9gRbh3fSvsK09lWNE0EUo4SRq4/EAf80Wc5hRvmOjmSbxTl8FdtR+c4IT4eWE/wDqRsnuCAfepCvDTKxgSMQsu4TEGN2VxdTZXBF7AMpNhfiNNfrEQBJGUaiOqBfZt7EAjz7vntnOWuH/AIXN5TpuvSCQDvD2ZrHs3LAHsI8KjM9DdJFL1WDxoQwIOoqqhg3cwIAIPh31nEUw3LsWSbZa4YbQr459B6BO7m4xwly+IAkmO8TXFrFOy3kRVpIpTcx+YG+IgPDqyL6dVvjR7U2qdiNWBcvbYuznc3x54rMHKLLv4fFzQ/0Oyj+291/cVxYeBnYIgJYkAADvNuyr3zzZb0eOWUDaZAfNl6rfp0VVcuwsmh31MgEZZOPXuVXSoHEbm53AK2O9qSc2jiF08M+3A2SuJHXI9UzOZPMbwz4cn/TcMvcQ11NvC6fqFLjlpl5gzDER9gdmX+1jqX2Bt6GpvmoxxhzFAfonVo/C/FfW6j81TfPLl0azJO1wzppUgXBZCbq2+xKuLH7njVp/KLuSTD2VvcNHivjr5FK6mzzH5htPhz92VR7K3+z3pTg1dOafEmPMo+wOrIfEEAi3fuq1XEaPCavBm3ZnjhXlivvzxZd0WPEo4Sop/EnVPhwUe9URmJ49lPPnWyM4jDxuuzRPubcFYb37hdV40msblckTMrAbXvYjgDa/fbgfIg1KZpDiq7tna+BoJxGHLL0Vo5ocy6LMVQ/TMjKfMAFf/iR60+qy1lOOMOIimXijK35SCR6i4rUEMoZQy8CAR5HhV1nP4kLNvmOkrX7x1HwQvrRRRTCx0Un+ejLB08E1woZSjHxU3XzNnO3h2U4KpvOngOly52AuYmWQeQIDfpYn0quUVYU5YJOztDTvw54eaQLDsp48zeYdJgOjPGGQr+FusPksPSkrjSNVgALdXa+9iesb733HtTC5mseqYhor7yK1xftTQU24DYyb33uO6lYTR4W7ebNuzHhQ/fBOeiiinlyyKKKKEIpNc92C0zwzAbOhUnxUi3uG+PCnLVH53cu6XLmcDeJ1k9Ppb4a/pVcoqwp275OztLDvw5/KQ54U+OaPMOly5VPGJ2T04r8G3pSJ42Hp8/GxFNXmdLRTzQsCNcaSAHvHG3Z2kfhFKwGj1t3qwPs53jH0PmmzRRRTy5dKLnvy7rwYgDiGjb06yfu/tSv6Q6QOwEt4C4AJ+B7Cn9zoZf02WykcY7Sj8PH9JakCgGk3NjtYd/G/tt80lOKPXT3VJtWcDcaevqrDzcZl0GZQG9lZjG3iHBAv+LSfStFisoxuVZWHEG48xuK1FlWK6WCOTbrorbEEbgX3Gx3qyzHAhJ31HRzH78OWPqVTOeTLekwAkUbwyBj/AGtdW+Sp9KR1alzLBJPDJC4usilG8iLe9Zw5SZDLhJ2imBuPoYDqsOxgb93HiQdqjaG47SuuecFhiOYxHdryXDl2KaKeOVfqjZWHmpB/xTa518dBiMshlR1JZgyC41EMrahbjsDv3EUna9qlrqAjetCayiWVklaFp58F5V55r06THIoA6v8AMJCobBBYdY2ZRcqDa9zVPy/ASTSCOFCzHgqjfz8B4nanvzfckBgIS0lmnkA1kcFHYinu7Se0+QqcTC53BUXlaGRwkE/kRh79ym+UmEaXBzRqbOY20HuYAlD4bgVnF8fKJCwkctw13a5HCxubkW2sa1HUPguTeEiYvHh4lYm+rQC2/Hc7imJYy8grFsVtbZ2ua5ta/T4ZJA5fyZxuJa8eGdr76itl38WsvtT+5J4aWLBQxzgCRECNY3+nZdx4AVM15evY4gzGqjbLc60gNLQAMfv+L2iuXGY6KJdUsiIvezAD5r8ZZmUWITpIZFkS5XUvC441bVJUNK0wXbXLmGFEsTxNwdSp8mBFdVeGheLKmKhZJGR+Icq3mpIPyKn+TmNXCYiByysNaSXQm6g31oxIAtoJvxsbb8QejnQy7ocylsLCS0g/H9X6g1VkYhioUu2gXIW5sCeNhfa9hfyrN/U9y7MUtEQOjhj4jHrpqtVCvageRWZdPl+HlJ3KaW/uS6t8qanq0Qaiq45zS1xacxgiiiivVFFcWbYETQSwnhJGyH8QIv8ANdtFCMsQsqSRtHLpcWZWsR4g7irhyczeOLEwyFhcYo6baf8ASkUpJqt1gR1eJ8fGuLnMwJhzObuciRfJgP2IYelVhN2AHE8P8VnV2TRdnsttEYdvHmMVq4V7UZyexbS4WCRhZmjUsLg2Nhq4eN6k60Qa4rjSKGhXNjMMskbxsLq6lWHeGFj8Gsv4/CmKZ424rIynzBIP7Vqmkxy45EYufMpGw8RaOQK+skBVJHWFz4gmwv8AVS9oYSAQta6Z2xvc15ABFceHwltT45p8xWTLwgJJiYob8RezDsG3WIHHhxqrZVzQSmxxM6KP6UBY/mawB9DTA5LclIMCriEuS9tRdr3te2wAA4ngKjDG4OqQrrytcEsWw11TWuAw5qw1HZzk8GKj6OeNZF4i/EHvUjdT4ipGimiKrDBINQlzieaTBk3SWZB3EowHldb+5NfvB802BU3d5pPukqFPnpW/zTCvUNmfKnBwXE2IjVh9nUC35VuarMcYxITYtlrf+LXknhn0XTleT4fDLpgiSMdukbnzPE+tSNQfJvlLBjVkaDVZG0nULX2BBAve29t7cDUBzq51icLh4mw76NTlGIVSfpJFrg24GvdpobUZKtsMkk3ZuwcTr6q7SSBQSSABxJ2FVzM+XmXwbNiFZv6Y+uf07D1NILMc1xE5vPKzn77EgeQOw9K/eUlklSQAWVti99NwO3vAvcgb2qg2g5ALWbc7Wisjq92HU18lpLJ80TEwJNH9Di4va44gg2JFwQRsTVW50MdPBh0kgldLsUso+osNrkdYbBjcHiBURzV8pjJLNh5GS7EyppUKp7HAAA8G3341bOXmBabL8Qq3DBNa2O9061tu8Aj1q3a2oyVn9mLPag1wwqM8cD7a4ZhILFY/VKJDdyp/9Qlri7fVc34aRa9qZ/Mzmqt/EQAaNxKFvcDVswW++kWTjft33pStAwYqQQw4i249KtHNdmHQ5nHcgCS8Zv267aR+YLSkbqPBW/bYQ+zuA0Hlj7rQlFFFaC5JKjnxy3qwYgDgTEx87sv+/wB6ViTDQVI3vcHa9j9QueA27q0Fzi5d0+WzqPqVekXzTrfIBHrWdwB3+/8A3hSU4o7vXTXTJt2fZP8AU/PunXzN4r/yjxFgSr6wovdQw4G443BO19mFMWkrzWYmODFqnSAvLrjIDAiwClDwBJ1A8Lixp1UxCasCxrwZs2hx348/mqKKKKtSSKKKKEJSc9+Xb4fEAcdUTH2ZP99KyJLkDx3/AM1oLnNy7pstmt9UYEo/Bu36dVIfLyo1syg2W4JvYNwANuN9XwPGkpx+a6a65dqzU1aSOePqnDzOZoZMG8TNdopNu/SwBH6g/wD0Uw6RvMzmPR45oidpkI/EvWHxqp5UxC6rAsi8ouztLuOPPPrVFeWqB5T8qIMCqtMHOu4UIpNyLXF+A49p76pWfc58iKjQQKVkW6Mz6txsysqEaWB7Ce41J0jW5qmGyTS0LW4HU0A6/wCpqV4azvmHLrMZQScQ6r3R2Qe67/NQDY2ZzcyOx7yzE+5NUm0jQLQZczyPyeB3Y+y1RS+5yOVGMwkkUeHVLSqbNpLNqBAIA4faXsPGqNyI5cT4aZUmlMkDEKwdiSl/tKTwA7Re1r9u9MXnQwBfBdKrlXhOpbAktqFtAt3tp9qkZNthIwVIsv8AzWlrZQHA5Z0+g0qlBmHKnGSkifEO1m4BrLtf7KgAioRnJJJ4k3Pma/fRHaw+o2Fu8EC3nuPerlzV4TDT4tosREsnUJTVwupu1x9okHtvbTSoq40XQPc2zxlzRgNBQdMAu/mTx5XFyxfZeO/gGU7e4ZvarhzxYfVllx/6cqt8Mv8Avq5YTBxxrpjREXuVQB7CoTnDg15ZiR3R6vykN/im9jZjLVzptQltjZQKYt45UHks5A114jDuIo5Cbq+oL3AqRqG23BlPrX2y3K3m1aQdt72Nhx4+G1WqLIGbKcShAMmGmEqkb3RlAe3gQurxsKUa0nJdFLO2Mip1A54V5kKpZFmbYbERTp9SENbvHBl9QSPWtMYadJoVdTqSRAw8VYf8Gss06OZrPOkwz4Zj1oTdP/bbs9Gv6EVbZ30NFnXxZ9qMSDMYHuPsfNLbOMv/AIbGPDG5ZluL7A3AO1wd9hw7fWoyPFFJFdQupWVlZdXEEEcT3i97VeOdHLzHm0ciCxmEbDa+6kKdjtwC+9L2QbnwNvaqnihIT9mkErGvONQK9a/C1JluLWWGOVfpdFcfiAP+a66pfNPmXS5aik3aJmjPkDdP0sB6VdKfa7aAK5KaLspHM3Gi+UsYYEEXBFiPA8azFnGFeCeSBif5bso9Dx9RY1qKkbzv5akWMMgFmmAfjtsLNtbbdQb37aptDatBWnc8uzKWbx1HwSqrk0c0cseJQXETq1wy9hDAEXuL2I3G+47DWloJQ6hlNwwBB8DuKzNg54U0uRrOlgVYdUMdgbbbAX2udwKfHN1mQny6Fu1B0R2t9Fgvuuk+tRs5zCtvhhIa+mWHrvPFWeiiimlhoooooQvhiYQ6MjC6spUjwIsf3rMuZQNA8sB4rIykn7hI287fArUNI/nNyZUx8shBCsiS3He2pD4W1hb+dL2gVAK1rolDZHNOtD4g4eap3J/MP4fFQzf0OrHyv1vgmtPqwO4rLbYeNXAZyU4OVAJB6wsAxF+F78N60NyJxwmwELBtVl0FrEXKErex3F7A28ajZzmFffLKhkg4j1Hqojnay3pcuZgOtEyyen0t8Nf0pErK2nTfbVqt2Xta9vKtQZpgxNBJEeEkbIfxAj/NZkkh0s6ubMptbvIJDD3sfQ1G0D8gVZc8lYnM3GvP5CmuQGV4fFYxcPPr0urabG12UarE2O1g3tX45dcnxgcY0SklCAyE8dLX495BDC/hXByezD+HxUM39Dqx8r2b9JNMvnty8GKDErvYlCfAgsv7N71ANBYTqE3JK+O1sBP4uFOFRu6c0o6f+Sy/+IZKF+08LRG/Y6XUE+qhvWkCKcHMjmN4ZsOT9DB18mFj8rf1qUB/Kh1VV7MJhDxm0g/fGiT7LYkHjwP+RUjyczY4TExTqNRRidN7XBBUi/ZcMa7uX2XdDmOIQCwLa18pOsPQXI9Kr9VYtK0AWyx10cOhCv8AmfOvjZCRCqRDwGpvdtv002ExQxOA6QbiaAm3Z1l3HubUleTnN9i8ZGsqlEibgztxtsbKtzxHbanPyUyZsLg0w7yCTRq6wW2zEm1rnhc01CXk/lkufvJtmY0CGm0DiB6ngRv1SDbNZdRMahL9bZnGwta5LW/p9hV75oMWXxGKikcya413JY3CErYFt7APS1zKDo55E/pcr7MR/iurJc6mw03Swt0bFdBKgHqnTewa4v1QfOl2Oo4ErZtNnEsLms1HqCMcTovOUWXth8VNE/FXIB23X7DbbbrY+tSHIXNjhcUs5JEa9WQC+6sdO9geBIb8NQ2Px8s8hkmdnc8WY77cB5V8tdltfjxHtbzqNaGoVxYXx7D8aihp1P30Tn55cFqwkU6i5ilFz91we3+4J70l5SCxI4EkgHiBc2B8acfJbF/+IZHLh2N5YozHv4DVC3wB+E0mu2rJsSHDVI3aCxroXZsNPA4+5TN5kcx0zYiAn6lWRR4oSG+GX8tM6XPsMsixGePpGYKFDAtc3sLDhwPGszRE32Nr7cbbHiD4V9cBiWjkWRNirKw81Nx+1esnLRSijabsbPKX7VK6U1pTPlotU0ueebAq2DSUrcpJp1DioYG3bbTqCgjxFX3BYlZI0kX6XUMPJgCP3qo87mIVcsYE2LyKq+e7fshpmWhYVh2IkWhnf8H1SVw+D1KH2RASCzEEarMwFhuCRsNrX7eNMzmNxpK4mI8AVdfW4b/4rSlJpm8xiHpsQewIo92Nv2NKw/uF0F5NrZXk8Kc/n4Thr2vKKeXKr2iiihCKXHPNlwfCxygdZH0XtsA/G/aN1HDvpj1Act8v6bL8RGOOjUvmhDL8qKhIKtIV9lk7OZj+PTXos54ldwe9Rffttv5dm1NzmRzG8E2HJ3Rw6+TCx+V+aUMshO59PLsq3c1GY9DmSKTtKrRn1sy/KgetJROo8LprfEX2Zw1GPL4qn/Wd+cvLugzOawsrkSr+Pdv1aq0PSm58cu//AF8QB/VEx9mX/fTU7atruWLdMmzaA3eKeqVIF9u+nfi4jjeT1mB1pCCb8dUNr+pC/qpJ9ISQT2Wt6cB7AU4eZzM1khnw7EtpYNZgo2YAMAF7NSn3FLw5kbwtS8wRG2Uf1IP3olN0Clbrq3O17d9gDarZzTTPFmCnS2hwYmIBsNQ1Jfu3QW86h89x2IhxU0RZQUkKXEaDZT1SNI22C8KjsLm0qzJKXYlXVtydyrahfvN7+9QB2SCmpI3TRFuFHDDEnPEaDgmBz3ZfpmhxAH1I0bHxQ3X4ZvalpCFv1iQPAXPpcinpznYQYnKjIu+nRMvlbrfpYn0pExPYgjsqc4o9L3XJt2YDUVHqPNPHmkx6NhGhUn+U99+Nn33/ABBuHeKuuIxKIAXdVubDUQL9w3rOeD5T4mFNEUrr1NGoM30i+lVHBQCTuBffjXA+PdnLs7lr7OzMSAQR4m+979ltqm2fZaBRLS3S6WVzy6gPifQfclM84GhcfiI+jUMHJ1gm51WIuBtfrcarVWbl8/S4tZxa00EUl+y+kBgNu9CPPuqPyzkzjZyOhw0jA/aKkL+ZrD5ql2LjRadne1sLC40wGe/XPir5mHNzhhljYiBneXolmUsRYrYMwCqO1b2vfe1Ux8P0UZf6lCafpNukB2Vrd6niDxHu9+S2CkiwMMU4GtYwjC4I22G447WqIw3N7ggZOkVpOkKkhjYDTw06bEeO+/lTDoa0LViQ3js7TZnE499R0w1S35u87XD5gigMElAja5vfUSUY9xB0jyZq/ecc3+Lkxkow8BEYdrOzAIQTdbX3sAbbX3Bpz4HK4IBaGGOMAfZUD3I3rizPlVgsPcS4mNSPshgz/lW7fFe9iA2jio//AEHGXbhZiRTU13HCiXuVcz7mxxGIUfdiBPy4H7Vbsq5usvhA/ldKe+Ulv07L8VDZpzuYZbiCKSU97WVf8n4qn5rzpY+XaMpAv3Vu3uxPwBXm1C3LFW9leM/7HZH/AJHIYp1zzw4aK7skUSC29goA4Af8Ckfy+5YDGylUUiGP6L/UTwLEH6b9mxIt2ajas5nmU8zBp5Xc2uNTE2v3DgvltXFVckxcKDJOWO7Wwnbcau8vvkSF2zYQLGjNIt3F1UdZgtzuxv1DtsOJB8ac3M/lPRYEysLNM2od+ldl/wBx9aWXIbkrJjsQAQREpDSP2W/pH32G3gN60Lh4VRQigBVAUAcABsAKnAyp2kre1ooBCDjWp4bh6+AxX2oooppYSKKKKEIrw8K9rw0IWY+U+X/w+LmhtYKzKPK/V+CtceBxjRzJKv1IQ480IIHxV6558v6PGpKBtKlzsOK9U/p0UvRWc8UcQuzs0gmha46jHyPkVqrCzh0V1+llDDyIuKrfOXl/TZbMB9SASj8Buf06h618+a/MemyyEk3aO8R/CTp/SVq04iIOrIwuGBUjwIsae/dveFyR2rPNxafIrKlWnm4z9MHjNchIjZWRrC57Cuw47qB61B4/A9FiJIWv1JGQ2tfqsR27b2r9TYcySBII2NgF0gEuSPqJCjiST6AUgDQ1XXytbKwsP6kdF18sMyTE42WdFKhyDpPHYAb7CxIANt+J3NQvbVuyvm5zCbcxdENt5CB8Alu7s7aYHJbmvhw7LLO3TOpuFtaMHsNuLEeO3hUxG9xSz7dZ7O0NDq00GPXJWXKMCXy2KGYbthljcHsugBB8qz9FkWJeZoo4XcqxQ6UYi6kg3PAbjtNaernxOIjiXU7Ki8bsQB80y+IOAxyWFZbe6z7VG12umJ3Y6pIZVzW46XeQLCPvtdvypf5Iq3ZXzR4Zd55XlPcoCL/k/NTOac4+XxXAlMrDsiUn9RsvzVQzTngc3GHw6r3NIxJ/Kth81CkLeKc7S8bR+o2R3bPU4pj4Dk7hIQgjgQaBpUkamAuWsGa54sx49tdGYZvh8OLzTRx/3MoPoOJpB5ry5zCf6sQ6j+mPqD9FiR5k1XXdiSSxJPEncnzJrw2gD9R98F6y53vO1K/lieZTzzLnSwMdxF0kx+6ulfd7fANVludLEzsUhjih6rEM12NwL24AEnccKWNeVWZnlPMuuzsGVTxx6ZdFL5pylxmI/wBbEyMP6QxC/lWw+KiWFvg+4r7QwPIQqKzNwAUFj38Bv2mrLlfN3mE1v5PRqftSMF/Tct8VWAXZYptz4oBQkNHgOmfRVOgU2sr5nhxxOIJ+7EoH6mv+wq3ZXyCy6C1sOrnvls59jt7CrRA88EjJe1nZ+tXd2XMpB5flU85tDC7n7iMR6kCwq+cmeaqaQhsWwiX+hSDIfAkdVfPc+FOSKJVFlAA7gAB8V9aubZ2jPFZ017yuFGAN6nr7LhyvLIsPEsUKBEXgB8kniSe813UUVesokk1KKKKKF4iiiihCKKKKEKg88OWmXAiRQSYpASBxKt1T86D6UnosIxUlYTuLgbnawsR2sDY8O/wrTU8IdSrC4IsazxywwOKwmIaGSWRlt1GJazR2stt7bDqkefYaUtDaHaW7dU5c0w6jEY6fGf8AisvNjmkmDnlhnBSJ7ElyBpcbA2J4EEA24dU8Kcqm+9ZQNWLIeWuNwihI5rxjgrAMo8r7r5A2ryObZFCrrbdhmd2jCK66A8czj9rvdcnIvBNimxTxa5GYN1mOkEWsQo27L71Nx4eOMEqqoNySABx3JNJCXnQx72XVHGpI1MqdYC4v9RPZ4VA8o87kxEl3kcggHSzNZTfgATbYW3AFT7ZgH4hKC655CBK7CnE08gnjmnLfAQXD4lCw4ql3P6L29arOec6axs6Q4diycTIQo4gcFuTxHaKVOW4AyK1rXDKPqUGxa2wPG5dd+yx412y6mi1l16QB43BID2UKFLBrarWI2u3VF+yoGd5yTLbss7DR35d+HEZcu8hS2N5yswlP+qsQ42jS3pdiT81WM0xjSyF2d2vuC7FmF+Iue6uZTYHhwtuP+2NS2G5M4iYqMPG0oZQ2pFcAX+yWYKAR2728TVJJdnitNscUGIAaOXX5UNX0crpFhYgn1B3HqDceVqvuWc02MexmeOFfMs3svV/VVvy3mpwSWMzSzHuLaV9Au/zVghedEtLedmZ/avdj8JIC/dU/lnIvHz20YZrH7TWVfPr2v6U/styLDYcfyII4/FVF/U8T71J1aLPvKQkvo/0ZzNfKnmlLlXNQSlsU6A2ABi1Fhx+rV1TxHZ2casuV822AisWRpmG15W22t9lAq+4NXWirREwaLOfbrQ/N58MFyYLARRLpijSNe5FCj4FdVq9oqxKIooooQiiiihCKKKKEIooooQiiiihCKKKKEIqF5Scn4MbCYpl8VYfUh/qU/wCDsamqKCARQqTXOaQ5poQkNmnITEYOQyGNsREvWVkvxHAuB1hY24bcd6pLA93/AHtrV1qjMbkWFl3lw8TnvZFv72v2Us6z1/UrYhvhzf5G14jDplyosyk8NgLf9ub/AP1tXdk+TzYqQRxISTffSdIsCdyAQPXvFaEXkngQ2r+Fh1XvcoDv61LQQKg0ooUDgFAA9hXgs28qx99Cn4Mx4n29wlTyd5E4xIY10xpqlEsjN/qKBa0a2B4gA8RvtUtkfNdFExeaZpGYWIUBVG4JIvc32t2bEjtpjUVaIWBZr7fO6uNK50H0qAyrkjgYN4sOgP8AUwLN7vcj0qeFe0VYABklXvc81canivLV7RRXqiiiiihCKKKKEIooooQiiiihCKKKKEIooooQiiiihCKKKKEIooooQiiiihCKKKKEIooooQiiiihCKKKKEIooooQiiiihCKKKKEIooooQiiiihCKKKKEIooooQiiiihC//9k=';
  constructor(
    private route: ActivatedRoute,
    private service: ChoclateService,
    private sanitizer: DomSanitizer,
    public dialog: MatDialog
  ) {}

  ngOnInit(): void {
    const choclateId = this.route.snapshot.params['id'];
    this.getCurrentChoclateDetails(choclateId);
  }

  getCurrentChoclateDetails(id: string) {
    // Can use another get api for fetching individual choclate data
    this.currentChoclate = this.service.transformedChoclateData.find(
      (choclate) => choclate.choclateDetails.id === id
    );

    if (this.currentChoclate && this.currentChoclate.cheapestOffer) {
      this.currentChoclate?.choclateDetails.prices.map(
        (price: CheapestOffer) => {

          if (price.link === this.currentChoclate.cheapestOffer) {
            price.isCheapest = true;
          }
        }
      );
    }
  }

  sanitizeUrl(url: any) {
    return this.sanitizer.bypassSecurityTrustUrl(url);
  }

  openEditDialog(): void {
    const dialogRef = this.dialog.open(EditChoclateDetailsComponent, {
      width: '350px',
      disableClose: true,
      data: {
        id: this.currentChoclate.choclateDetails.id,
        name: this.currentChoclate.choclateDetails.name,
        brand: this.currentChoclate.choclateDetails.brand,
      },
    });

    dialogRef.afterClosed().subscribe((result) => {
      //  call get api for updated choclate details
    });
  }
}
